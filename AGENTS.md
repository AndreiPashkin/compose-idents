# Compose-Idents Agents.md Guide for OpenAI Codex

This Agents.md file provides comprehensive guidance for OpenAI Codex and other AI agents working with this codebase.

## Project Structure for OpenAI Codex Navigation

- `README.md`: User-facing documentation of the project
- `/src`: Source code that OpenAI Codex should analyze
    - `/ast`: Types that represent AST elements of the syntax accepted by the macro
    - `/interpreter.rs`: Implementation of the interpreter for the macro. It executes the code passed by the user to
                         the macro, and it loosely follows the tree-walk interpreter design as described in:
                         https://craftinginterpreters.com/a-tree-walk-interpreter.html
    - `/resolve.rs`: Implementation of the resolve-phase if the interpreter - it performs static-analysis.
    - `/eval.rs`: Implementation of the eval-phase of the interpreter - it performs execution of the code.
- `/tests`: Tests of the project. Most tests rely on `trybuild` crate.

## General Instructions for OpenAI Codex

- Read `README.md` to understand the project and its purpose.
- Read `CHANGELOG.md` to see recent changes and updates.

## Coding Conventions for OpenAI Codex

### General Conventions for Agents.md Implementation

- Generally prefer to follow [Rust Style Guide](https://doc.rust-lang.org/stable/style-guide/).
- OpenAI Codex could use [the Rust Book](https://doc.rust-lang.org/stable/book/index.html) for a reference
  on idiomatic Rust code.
- In general OpenAI Codex should aim to write idiomatic Rust code and follow general OOP principles.
- OpenAI Codex should follow the existing code style in each existing file.
- OpenAI Codex should add comments for complex logic.

## Testing Requirements for OpenAI Codex

OpenAI Codex should run tests with the following commands:

```bash
# Run all tests with OpenAI Codex
cargo test

# Run specific test file, used by trybuild, with OpenAI Codex
cargo test -- compile_tests trybuild=tests/compile/simple_compose.rs
```

## Pull Request Guidelines for OpenAI Codex

When OpenAI Codex helps create a PR, please ensure it:

1. Includes a clear description of the changes as guided by Agents.md
2. References any related issues that OpenAI Codex is addressing
3. Ensures all tests pass for code generated by OpenAI Codex
4. Includes screenshots for UI changes implemented with OpenAI Codex
5. Keeps PRs focused on a single concern as specified in Agents.md

## Programmatic Checks for OpenAI Codex

Before submitting changes generated by OpenAI Codex, run:

```bash
# Lint check for OpenAI Codex code
task lint

# Build check for OpenAI Codex implementations
cargo build
```

All checks must pass before OpenAI Codex generated code can be merged. Agents.md helps ensure OpenAI Codex follows these requirements.
